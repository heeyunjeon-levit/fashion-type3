<!DOCTYPE html>
<html>
<head>
  <title>Test CPU (URL) vs GPU (Base64) Modes</title>
  <script>
    // Test that our conditional logic works
    
    // Simulate CPU mode (URL)
    const testCPU = () => {
      const USE_BASE64 = false; // CPU mode
      const imageUrl = "https://lbiljokkdlrhlsmepojq.supabase.co/storage/v1/object/public/images/test.jpg";
      
      let requestBody = {};
      
      if (USE_BASE64) {
        requestBody.imageBase64 = "base64data...";
      } else {
        requestBody.imageUrl = imageUrl;
      }
      
      console.log("CPU Mode (URL):", requestBody);
      return requestBody.hasOwnProperty('imageUrl') && !requestBody.hasOwnProperty('imageBase64');
    }
    
    // Simulate GPU mode (base64)
    const testGPU = () => {
      const USE_BASE64 = true; // GPU mode
      const imageUrl = "https://lbiljokkdlrhlsmepojq.supabase.co/storage/v1/object/public/images/test.jpg";
      
      let requestBody = {};
      
      if (USE_BASE64) {
        requestBody.imageBase64 = "base64data...";
      } else {
        requestBody.imageUrl = imageUrl;
      }
      
      console.log("GPU Mode (Base64):", requestBody);
      return requestBody.hasOwnProperty('imageBase64') && !requestBody.hasOwnProperty('imageUrl');
    }
    
    // Run tests
    const cpuTest = testCPU();
    const gpuTest = testGPU();
    
    document.write(`<h1>Test Results</h1>`);
    document.write(`<p>CPU Mode (URL): ${cpuTest ? '✅ PASS' : '❌ FAIL'}</p>`);
    document.write(`<p>GPU Mode (Base64): ${gpuTest ? '✅ PASS' : '❌ FAIL'}</p>`);
    
    if (cpuTest && gpuTest) {
      document.write(`<h2 style="color: green;">✅ All tests passed!</h2>`);
    } else {
      document.write(`<h2 style="color: red;">❌ Tests failed!</h2>`);
    }
  </script>
</head>
<body>
</body>
</html>

